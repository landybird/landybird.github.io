---
title: python 中的一些基础的概念
description: python的一些概念
categories:
- python
tags:
- python基础
---

<br>

# python 中的一些基础的概念






## 1 python的自省


**自省就是面向对象的语言所写的程序在运行时,所能知道对象的类型.
也就是运行时能够获得对象的类型.比如type(),dir(),getattr(),hasattr(),isinstance()**

```python
a = [1,2,3]
b = {'a':1,'b':2,'c':3}
c = True


print(type(a),isinstance(b,dict))
```

## 2 Python 中单下划线和双下划线

- _xxx **不能用`'from module import *'`导入  以单下划线开头的表示的是保护类型的变量。即保护类型只能允许其本身与子类进行访问。**

- _ _xxx__ **`系统定义的是特列方法`。像__init__之类的**

- __xxx **`类中的私有变量名` 双下划线的表示的是私有类型的变量。只能是允许这个类本身进行访问了。连子类也不可以**



## 3 python中的不定长参数 *args and **kwargs

**不确定函数里传递参数个数时可以用*args**
```python
def getall(*args):
	for item in args:
		print(item)

getall('a','b','c')
getall(*['a','b','c'])  # 打散
```

**使用没有事先定义的参数名**kwargs**

```
def get_undifined(**kwargs):
	for item in kwargs.items():
		print(item[0],item[1])


get_undifined(name='amy',age=14) # 打散
get_undifined(**{'a':1,'b':'hello'}) # 打散
```

**注意两者共同使用的时候 位置参数 要在前**

## 4 python中装饰器 与 AOP 面向切面编程

```python
切面需求： 较为经典的有插入日志、性能测试、事务处理等

而装饰器这种设计模式 是解决这类问题的绝佳途径，可以为已经存在的对象添加额外的功能
```

## 5 python中鸭子模型

```python
会鸭子叫的就是鸭子，不关心对象是什么类型，只关心对象的特性。

比如众多的文件句柄，可迭代对象等具有同一类特征的不同数据对象

鸭子类型在动态语言中经常使用，非常灵活
```

## 6 Python中的作用域

**python中，一个变量的作用域总是由在代码中被赋值的地方所决定的。**

Python`变量的搜索顺序`：

```python
本地作用域（Local）→当前作用域被嵌入的本地作用域（Enclosing locals）→全局/模块作用域（Global）→内置作用域（Built-in）
```

## 7 python中的语法结构闭包

**闭包(closure)是函数式编程的重要的 `语法结构`。闭包也是一种组织代码的结构，它同样提高了代码的可重复使用性。**

当一个内嵌函数引用其外部作作用域的变量,我们就会得到一个闭包. 总结一下,创建一个闭包必须满足以下几点:
```python
1 必须有一个内嵌函数
2 内嵌函数必须引用外部函数中的变量
3 外部函数的返回值必须是内嵌函数
```

## 8 python 的 垃圾回收机制

**Python垃圾回收机制**

**Python GC主要使用 `引用计数`（reference counting）来跟踪和回收垃圾。在引用计数的基础上，通过`“标记-清除”`（mark and sweep）
解决容器对象可能产生的循环引用问题，通过`“分代回收”`（generation collection）以空间换时间的方法提高垃圾回收效率。**

- 1 **引用计数**
```python
PyObject是每个对象必有的内容，其中ob_refcnt就是做为引用计数。当一个对象有新的引用时，它的ob_refcnt就会增加，
当引用它的对象被删除，它的ob_refcnt就会减少.引用计数为0时，该对象生命就结束了。
```

- 2 **标记-清除机制**
```python
基本思路是先按需分配，等到没有空闲内存的时候从寄存器和程序栈上的引用出发，遍历以对象为节点、以引用为边构成的图，
把所有可以访问到的对象打上标记，然后清扫一遍内存空间，把所有没标记的对象释放。
```
- 3 **分代技术**
```python
分代回收的整体思想是：将系统中的所有内存块根据其存活时间划分为不同的集合，每个集合就成为一个“代”，
垃圾收集频率随着“代”的存活时间的增大而减小，存活时间通常利用经过几次垃圾回收来度量。
Python默认定义了三代对象集合，索引数越大，对象存活时间越长。
```


## 9 python种类以及与其他计算机语言类型对比

**C语言： 代码编译得到`机器码` ，机器码在处理器上直接执行，每一条指令控制CPU工作–速度较快**

**Java，c#，python，php 其他语言： 代码编译得到`字节码` ，虚拟机执行字节码并转换成机器码再后在处理器上执行—-速度慢**

<br>

**python的种类**

```python
Cpython

	Python的官方版本，使用C语言实现，使用最为广泛，
	CPython实现会将源文件（py文件）转换成字节码文件
	（pyc文件），然后运行在Python虚拟机上。

Jyhton

	Python的Java实现，Jython会将Python代码动态编译成Java
	字节>>码，然后在JVM上运行。

IronPython

	Python的C#实现，IronPython将Python代码编译成C#字节
	码，然后在CLR上运行。（与Jython类似）

PyPy（特殊）

	Python实现的Python，将Python的字节码字节码再编译成机器
	码。
```

## 9 python PEP8 编码规范

### 一 代码编排

- **1 缩进。4个空格的缩进（编辑器都可以完成此功能），`不使用Tap`，更不能混合使用Tap和空格。**
- **2 每行最大长度79，换行可以使用反斜杠，最好使用圆括号。换行点要在操作符的后边敲回车。**
- **3 类和top-level函数定义之间空两行；类中的方法定义之间空一行；函数内逻辑无关段落之间空一行；其他地方尽量不要再空行。**

### 二 文档编排

- **1 模块内容的顺序：模块说明和docstring—import—globals&constants—其他定义。其中import部分，又按标准、三方和自己编写顺序依次排放，之间空一行。**
- **2 不要在一句import中多个库，比如import os, sys不推荐。**
- **3 如果采用from XX import XX引用库，可以省略‘module.’，都是可能出现命名冲突，这时就要采用import XX。**

### 三 空格的使用

**总体原则，避免不必要的空格。**

- **1 各种右括号前不要加空格。**
- **2 逗号、冒号、分号前不要加空格。**
- **3 函数的左括号前不要加空格。如Func(1)。**
- **4 序列的左括号前不要加空格。如list[2]。**
- **5 操作符左右各加一个空格，不要为了对齐增加空格。**
- **6 函数默认参数使用的赋值符左右省略空格。**
- **7 不要将多句语句写在同一行，尽管使用‘；’允许。**
- **8 if/for/while语句中，即使执行语句只有一句，也必须另起一行。**

### 四 注释

**注释必须使用英文，最好是完整的句子，首字母大写，句后要有结束符，结束符后跟两个空格，开始下一句。如果是短语，可以省略结束符。**

- **1 块注释，在一段代码前增加的注释。在‘#’后加一空格。段落之间以只有‘#’的行间隔。比如：**
- **2 行注释，在一句代码后加注释。比如：x = x + 1 # Increment x但是这种方式尽量少使用。**
- **3 避免无谓的注释。**

### 五 文档描述

- **1 为所有的共有模块、函数、类、方法写docstrings；非共有的没有必要，但是可以写注释（在def的下一行）。**
- **2 如果docstring要换行，参考如下例子,详见PEP 257**

### 六 命名规范

**新编代码必须按下面命名风格进行，现有库的编码尽量保持风格。**

- 1 尽量单独使用小写字母‘l’，大写字母‘O’等容易混淆的字母。
- 2 模块命名尽量短小，使用全部小写的方式，可以使用下划线。
- 3 包命名尽量短小，使用全部小写的方式，不可以使用下划线。
- 4 类的命名使用CapWords的方式，模块内部使用的类采用_CapWords的方式。
- 5 异常命名使用CapWords+Error后缀的方式。
- 6 全局变量尽量只在模块内有效，类似C语言中的static。实现方法有两种，一是__all__机制;二是前缀一个下划线。
- 7 函数命名使用全部小写的方式，可以使用下划线。
- 8 常量命名使用全部大写的方式，可以使用下划线。
- 9 类的属性（方法和变量）命名使用全部小写的方式，可以使用下划线。
- 9 类的属性有3种作用域public、non-public和subclass API，可以理解成C++中的public、private、protected，non-public属性前，前缀一条下划线。
- 11 类的属性若与关键字名字冲突，后缀一下划线，尽量不要使用缩略等其他方式。
- 12 为避免与子类属性命名冲突，在类的一些属性前，前缀两条下划线。比如：类Foo中声明__a,访问时，只能通过Foo._Foo__a，避免歧义。如果子类也叫Foo，那就无能为力了。
- 13 类的方法第一个参数必须是self，而静态方法第一个参数必须是cls。

### 七 编码建议

- 1 编码中考虑到其他python实现的效率等问题，比如运算符‘+’在CPython（Python）中效率很高，都是Jython中却非常低，所以应该采用.join()的方式。
- 2 尽可能使用‘is’‘is not’取代‘==’，比如if x is not None 要优于if x。
- 3 使用基于类的异常，每个模块或包都有自己的异常类，此异常类继承自Exception。
- 4 异常中不要使用裸露的except，except后跟具体的exceptions。
- 5 异常中try的代码尽可能少。比如：
- 6 使用startswith() and endswith()代替切片进行序列前缀或后缀的检查。比如
- 7 使用isinstance()比较对象的类型。比如
- 8 判断序列空或不空，有如下规则
- 9 字符串不要以空格收尾。
- 10 二进制数据判断使用 if boolvalue的方式。

